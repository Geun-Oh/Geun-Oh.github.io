+++
title = '241112'
date = 2024-11-14T18:19:20+09:00
draft = false
+++

어제 DAN 다녀오고
회사에서 자체적으로 진행하는 codegen 프로젝트를 sdk없는 형태로 방향을 틀어
재설계하기 시작했다.

SDK에 의존되는 사항이 많아 외부 의존성을 줄이기 위해서!

그리고 AWS S3의 조건부 쓰기를 API 단에서 지원하기 시작했고,

관련하여 Terraform에서도 해당 기능을 이용해 s3-native state locking을 지원하게 되었는데,

처음에는 당연히 안되겠지 했다가

나중에 좀 더 들여다보니 API내부 로직이 빡빡하게 들어가있지 않고

단순히 `If-None-Match` 헤더 기반으로 동작함을 확인했다.

이는 rfc 7232에 있는 내용이라 S3 Compatible API들도 표준에 맞게 연동해두었다면 모든 서비스들이 동일하게 연동 가능한 사항이어서,

조금의 코드 수정만으로 state locking까지 지원 가능해졌다.

추후 Terraform 새 버전 릴리즈되면 바로 문서 작성해둬야지!
